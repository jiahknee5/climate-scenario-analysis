<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ SUPER PROMPT: Comprehensive Climate Website Tester</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .super-container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .super-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .super-header h1 {
            font-size: 3em;
            font-weight: 300;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .super-header .mission {
            font-size: 1.2em;
            color: #495057;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .control-center {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .control-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 1px solid #dee2e6;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .control-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .control-card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .super-btn {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
            width: 100%;
            margin: 5px 0;
        }
        
        .super-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }
        
        .super-btn.critical {
            background: linear-gradient(135deg, #dc3545, #c82333);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }
        
        .super-btn.success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .super-btn.warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }
        
        .testing-phases {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }
        
        .phase-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .phase-card h3 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .phase-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #6c757d;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .phase-status.testing {
            background: #ffc107;
            animation: pulse 1.5s infinite;
        }
        
        .phase-status.success {
            background: #28a745;
        }
        
        .phase-status.error {
            background: #dc3545;
        }
        
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .test-checklist {
            list-style: none;
            padding: 0;
        }
        
        .test-checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
            color: #6c757d;
            transition: all 0.3s ease;
        }
        
        .test-checklist li.testing {
            color: #ffc107;
            font-weight: 500;
        }
        
        .test-checklist li.success {
            color: #28a745;
            font-weight: 500;
        }
        
        .test-checklist li.error {
            color: #dc3545;
            font-weight: 500;
        }
        
        .test-checklist li::before {
            content: "‚è≥";
            margin-right: 10px;
        }
        
        .test-checklist li.testing::before {
            content: "üîÑ";
        }
        
        .test-checklist li.success::before {
            content: "‚úÖ";
        }
        
        .test-checklist li.error::before {
            content: "‚ùå";
        }
        
        .results-dashboard {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #6c757d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .results-log {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .log-entry.info {
            color: #0066cc;
        }
        
        .log-entry.success {
            color: #28a745;
        }
        
        .log-entry.warning {
            color: #ffc107;
        }
        
        .log-entry.error {
            color: #dc3545;
        }
        
        .live-test-frame {
            width: 100%;
            height: 600px;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.3s ease;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200px 0; }
            100% { background-position: 200px 0; }
        }
        
        .emergency-panel {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
            display: none;
        }
        
        .emergency-panel.active {
            display: block;
            animation: emergencyPulse 1s infinite;
        }
        
        @keyframes emergencyPulse {
            0% { box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3); }
            50% { box-shadow: 0 8px 35px rgba(220, 53, 69, 0.6); }
            100% { box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3); }
        }
    </style>
</head>
<body>
    <div class="super-container">
        <div class="super-header">
            <h1>üöÄ SUPER PROMPT EXECUTOR</h1>
            <div class="mission">
                Comprehensive Climate Website Testing Protocol<br>
                <strong>Mission:</strong> Validate 100% functionality of climate.johnnycchung.com
            </div>
        </div>
        
        <!-- Control Center -->
        <div class="control-center">
            <div class="control-card">
                <h3>üéØ Mission Control</h3>
                <button class="super-btn critical" onclick="executeFullSuperPrompt()">
                    EXECUTE SUPER PROMPT
                </button>
                <button class="super-btn" onclick="runPhaseTest('infrastructure')">
                    Test Infrastructure
                </button>
                <button class="super-btn" onclick="runPhaseTest('authentication')">
                    Test Authentication
                </button>
            </div>
            
            <div class="control-card">
                <h3>üîó Link Testing</h3>
                <button class="super-btn" onclick="runPhaseTest('links')">
                    Test All Links
                </button>
                <button class="super-btn" onclick="runPhaseTest('navigation')">
                    Test Navigation
                </button>
                <button class="super-btn" onclick="runPhaseTest('frameworks')">
                    Test Frameworks
                </button>
            </div>
            
            <div class="control-card">
                <h3>üíæ Database Testing</h3>
                <button class="super-btn" onclick="runPhaseTest('database')">
                    Test DB Connections
                </button>
                <button class="super-btn" onclick="runPhaseTest('data-integrity')">
                    Test Data Integrity
                </button>
                <button class="super-btn" onclick="runPhaseTest('performance')">
                    Test Performance
                </button>
            </div>
            
            <div class="control-card">
                <h3>üîí Security Testing</h3>
                <button class="super-btn" onclick="runPhaseTest('security')">
                    Test Security
                </button>
                <button class="super-btn" onclick="runPhaseTest('ssl')">
                    Test SSL/HTTPS
                </button>
                <button class="super-btn" onclick="runPhaseTest('headers')">
                    Test Headers
                </button>
            </div>
        </div>
        
        <!-- Progress Tracking -->
        <div class="progress-bar">
            <div class="progress-fill" id="overall-progress"></div>
        </div>
        
        <!-- Emergency Panel -->
        <div class="emergency-panel" id="emergency-panel">
            <h2>üö® CRITICAL ISSUES DETECTED</h2>
            <p>Emergency protocols activated. Review issues immediately.</p>
            <button class="super-btn" onclick="hideEmergencyPanel()">Acknowledge</button>
        </div>
        
        <!-- Metrics Dashboard -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-number" id="total-tests">0</div>
                <div class="metric-label">Total Tests</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="passed-tests">0</div>
                <div class="metric-label">Passed</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="failed-tests">0</div>
                <div class="metric-label">Failed</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="success-rate">0%</div>
                <div class="metric-label">Success Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="total-time">0s</div>
                <div class="metric-label">Total Time</div>
            </div>
            <div class="metric-card">
                <div class="metric-number" id="critical-errors">0</div>
                <div class="metric-label">Critical Errors</div>
            </div>
        </div>
        
        <!-- Testing Phases -->
        <div class="testing-phases">
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase1-status"></span>
                    Phase 1: Infrastructure
                </h3>
                <ul class="test-checklist" id="phase1-checklist">
                    <li>Domain resolution test</li>
                    <li>SSL certificate validation</li>
                    <li>Vercel deployment status</li>
                    <li>CDN functionality</li>
                    <li>Server response times</li>
                </ul>
            </div>
            
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase2-status"></span>
                    Phase 2: Authentication
                </h3>
                <ul class="test-checklist" id="phase2-checklist">
                    <li>Public access testing</li>
                    <li>Private login validation</li>
                    <li>Admin access verification</li>
                    <li>Session management</li>
                    <li>API authentication</li>
                </ul>
            </div>
            
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase3-status"></span>
                    Phase 3: Database
                </h3>
                <ul class="test-checklist" id="phase3-checklist">
                    <li>PostgreSQL connections</li>
                    <li>Redis cache testing</li>
                    <li>CRUD operations</li>
                    <li>Data consistency</li>
                    <li>Performance metrics</li>
                </ul>
            </div>
            
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase4-status"></span>
                    Phase 4: Link Testing
                </h3>
                <ul class="test-checklist" id="phase4-checklist">
                    <li>Navigation links</li>
                    <li>Framework links</li>
                    <li>External integrations</li>
                    <li>Deep link validation</li>
                    <li>Mobile navigation</li>
                </ul>
            </div>
            
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase5-status"></span>
                    Phase 5: Frameworks
                </h3>
                <ul class="test-checklist" id="phase5-checklist">
                    <li>CLIMADA functionality</li>
                    <li>Climate-OS operations</li>
                    <li>C-bottle integration</li>
                    <li>Dual-map comparisons</li>
                    <li>Data visualizations</li>
                </ul>
            </div>
            
            <div class="phase-card">
                <h3>
                    <span class="phase-status" id="phase6-status"></span>
                    Phase 6: Performance
                </h3>
                <ul class="test-checklist" id="phase6-checklist">
                    <li>Page load speeds</li>
                    <li>Resource optimization</li>
                    <li>Mobile performance</li>
                    <li>Database queries</li>
                    <li>API response times</li>
                </ul>
            </div>
        </div>
        
        <!-- Results Dashboard -->
        <div class="results-dashboard">
            <div class="results-header">
                <h2>üìä Live Test Results</h2>
                <div>
                    <button class="super-btn success" onclick="exportResults()">Export Results</button>
                    <button class="super-btn warning" onclick="clearResults()">Clear Log</button>
                </div>
            </div>
            <div class="results-log" id="results-log">
                <div class="log-entry info">[READY] Super Prompt testing framework initialized</div>
            </div>
        </div>
        
        <!-- Live Testing Frame -->
        <div class="phase-card">
            <h3>üåê Live Website Testing</h3>
            <iframe class="live-test-frame" id="test-frame" src="https://climate.johnnycchung.com"></iframe>
        </div>
    </div>

    <script>
        // Super Prompt Testing Framework
        class SuperPromptTester {
            constructor() {
                this.totalTests = 0;
                this.passedTests = 0;
                this.failedTests = 0;
                this.criticalErrors = 0;
                this.startTime = Date.now();
                this.testResults = [];
                this.currentPhase = 0;
                this.isRunning = false;
            }
            
            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const entry = {
                    timestamp,
                    message: `[${timestamp}] ${message}`,
                    type
                };
                
                this.testResults.push(entry);
                this.updateResultsUI();
                console.log(`${type.toUpperCase()}: ${message}`);
                
                if (type === 'success') this.passedTests++;
                if (type === 'error') this.failedTests++;
                if (type === 'error' && message.includes('CRITICAL')) this.criticalErrors++;
                
                this.totalTests++;
                this.updateMetrics();
                
                if (this.criticalErrors > 0) {
                    this.showEmergencyPanel();
                }
            }
            
            updateResultsUI() {
                const logDiv = document.getElementById('results-log');
                logDiv.innerHTML = this.testResults.slice(-50).map(entry => 
                    `<div class="log-entry ${entry.type}">${entry.message}</div>`
                ).join('');
                logDiv.scrollTop = logDiv.scrollHeight;
            }
            
            updateMetrics() {
                document.getElementById('total-tests').textContent = this.totalTests;
                document.getElementById('passed-tests').textContent = this.passedTests;
                document.getElementById('failed-tests').textContent = this.failedTests;
                document.getElementById('critical-errors').textContent = this.criticalErrors;
                
                const successRate = this.totalTests > 0 ? 
                    Math.round((this.passedTests / this.totalTests) * 100) : 0;
                document.getElementById('success-rate').textContent = `${successRate}%`;
                
                const totalTime = Math.round((Date.now() - this.startTime) / 1000);
                document.getElementById('total-time').textContent = `${totalTime}s`;
                
                // Update progress bar
                const progress = this.totalTests > 0 ? (this.passedTests / this.totalTests) * 100 : 0;
                document.getElementById('overall-progress').style.width = `${progress}%`;
            }
            
            updatePhaseStatus(phaseId, status) {
                const statusElement = document.getElementById(`${phaseId}-status`);
                statusElement.className = `phase-status ${status}`;
                
                // Update checklist items
                const checklist = document.getElementById(`${phaseId}-checklist`);
                if (checklist) {
                    const items = checklist.querySelectorAll('li');
                    items.forEach(item => {
                        item.className = status;
                    });
                }
            }
            
            showEmergencyPanel() {
                const panel = document.getElementById('emergency-panel');
                panel.classList.add('active');
            }
            
            // Phase 1: Infrastructure Testing
            async testInfrastructure() {
                this.log('üîß Starting Infrastructure Testing', 'info');
                this.updatePhaseStatus('phase1', 'testing');
                
                try {
                    // Test domain resolution
                    await this.testDomainResolution();
                    
                    // Test SSL certificate
                    await this.testSSLCertificate();
                    
                    // Test Vercel deployment
                    await this.testVercelDeployment();
                    
                    // Test CDN functionality
                    await this.testCDNFunctionality();
                    
                    // Test server response times
                    await this.testServerResponseTimes();
                    
                    this.updatePhaseStatus('phase1', 'success');
                    this.log('‚úÖ Infrastructure testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase1', 'error');
                    this.log(`‚ùå CRITICAL: Infrastructure testing failed: ${error.message}`, 'error');
                }
            }
            
            async testDomainResolution() {
                this.log('Testing domain resolution...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com', {
                        method: 'HEAD',
                        cache: 'no-cache'
                    });
                    
                    if (response.ok) {
                        this.log('‚úÖ Domain resolves correctly', 'success');
                    } else {
                        this.log(`‚ùå Domain resolution failed: ${response.status}`, 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå CRITICAL: Domain resolution error: ${error.message}`, 'error');
                }
            }
            
            async testSSLCertificate() {
                this.log('Testing SSL certificate...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com', {
                        method: 'HEAD',
                        cache: 'no-cache'
                    });
                    
                    // Check if HTTPS is enforced
                    if (response.url.startsWith('https://')) {
                        this.log('‚úÖ SSL certificate is valid and HTTPS enforced', 'success');
                    } else {
                        this.log('‚ùå HTTPS not properly enforced', 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå SSL certificate test failed: ${error.message}`, 'error');
                }
            }
            
            async testVercelDeployment() {
                this.log('Testing Vercel deployment status...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com', {
                        cache: 'no-cache'
                    });
                    
                    const headers = response.headers;
                    const server = headers.get('server');
                    const vercelId = headers.get('x-vercel-id');
                    
                    if (server && server.includes('Vercel')) {
                        this.log('‚úÖ Vercel deployment active', 'success');
                    } else if (vercelId) {
                        this.log('‚úÖ Vercel deployment detected via headers', 'success');
                    } else {
                        this.log('‚ö†Ô∏è Vercel deployment status unclear', 'warning');
                    }
                } catch (error) {
                    this.log(`‚ùå Vercel deployment test failed: ${error.message}`, 'error');
                }
            }
            
            async testCDNFunctionality() {
                this.log('Testing CDN functionality...', 'info');
                
                try {
                    const startTime = performance.now();
                    const response = await fetch('https://climate.johnnycchung.com/shared-styles.css', {
                        cache: 'no-cache'
                    });
                    const endTime = performance.now();
                    
                    const loadTime = endTime - startTime;
                    
                    if (response.ok) {
                        this.log(`‚úÖ CDN serving assets (${loadTime.toFixed(2)}ms)`, 'success');
                    } else {
                        this.log('‚ùå CDN asset loading failed', 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå CDN test failed: ${error.message}`, 'error');
                }
            }
            
            async testServerResponseTimes() {
                this.log('Testing server response times...', 'info');
                
                const urls = [
                    'https://climate.johnnycchung.com',
                    'https://climate.johnnycchung.com/working-dual-climada.html',
                    'https://climate.johnnycchung.com/working-dual-climate-os.html'
                ];
                
                for (const url of urls) {
                    try {
                        const startTime = performance.now();
                        const response = await fetch(url, { method: 'HEAD', cache: 'no-cache' });
                        const endTime = performance.now();
                        
                        const responseTime = endTime - startTime;
                        const urlPath = new URL(url).pathname || '/';
                        
                        if (responseTime < 1000) {
                            this.log(`‚úÖ ${urlPath}: ${responseTime.toFixed(2)}ms`, 'success');
                        } else if (responseTime < 3000) {
                            this.log(`‚ö†Ô∏è ${urlPath}: ${responseTime.toFixed(2)}ms (slow)`, 'warning');
                        } else {
                            this.log(`‚ùå ${urlPath}: ${responseTime.toFixed(2)}ms (too slow)`, 'error');
                        }
                    } catch (error) {
                        this.log(`‚ùå Response time test failed for ${url}: ${error.message}`, 'error');
                    }
                }
            }
            
            // Phase 2: Authentication Testing
            async testAuthentication() {
                this.log('üîê Starting Authentication Testing', 'info');
                this.updatePhaseStatus('phase2', 'testing');
                
                try {
                    // Test public access
                    await this.testPublicAccess();
                    
                    // Test login functionality (simulated)
                    await this.testLoginFunctionality();
                    
                    // Test session management
                    await this.testSessionManagement();
                    
                    this.updatePhaseStatus('phase2', 'success');
                    this.log('‚úÖ Authentication testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase2', 'error');
                    this.log(`‚ùå Authentication testing failed: ${error.message}`, 'error');
                }
            }
            
            async testPublicAccess() {
                this.log('Testing public access...', 'info');
                
                const publicUrls = [
                    'https://climate.johnnycchung.com',
                    'https://climate.johnnycchung.com/working-dual-climada.html',
                    'https://climate.johnnycchung.com/working-dual-climate-os.html',
                    'https://climate.johnnycchung.com/cbottle-scenario-analysis.html'
                ];
                
                for (const url of publicUrls) {
                    try {
                        const response = await fetch(url, { cache: 'no-cache' });
                        const urlPath = new URL(url).pathname;
                        
                        if (response.ok) {
                            this.log(`‚úÖ Public access: ${urlPath}`, 'success');
                        } else if (response.status === 401 || response.status === 403) {
                            this.log(`‚ùå Unexpected auth required: ${urlPath}`, 'error');
                        } else {
                            this.log(`‚ö†Ô∏è Public access issue: ${urlPath} (${response.status})`, 'warning');
                        }
                    } catch (error) {
                        this.log(`‚ùå Public access test failed for ${url}: ${error.message}`, 'error');
                    }
                }
            }
            
            async testLoginFunctionality() {
                this.log('Testing login functionality (simulated)...', 'info');
                
                // Since we can't actually test login without credentials,
                // we'll test for the presence of login-related elements
                try {
                    const response = await fetch('https://climate.johnnycchung.com');
                    const html = await response.text();
                    
                    // Look for login-related indicators
                    if (html.includes('login') || html.includes('auth') || html.includes('signin')) {
                        this.log('‚úÖ Login functionality detected in content', 'success');
                    } else {
                        this.log('‚ÑπÔ∏è No explicit login functionality detected (may be external)', 'info');
                    }
                } catch (error) {
                    this.log(`‚ùå Login functionality test failed: ${error.message}`, 'error');
                }
            }
            
            async testSessionManagement() {
                this.log('Testing session management...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com', {
                        credentials: 'include',
                        cache: 'no-cache'
                    });
                    
                    // Check for session-related headers
                    const headers = response.headers;
                    const setCookie = headers.get('set-cookie');
                    const sessionHeaders = ['x-session', 'x-auth-token', 'authorization'];
                    
                    let sessionManagementDetected = false;
                    
                    if (setCookie) {
                        this.log('‚úÖ Session cookies detected', 'success');
                        sessionManagementDetected = true;
                    }
                    
                    sessionHeaders.forEach(header => {
                        if (headers.get(header)) {
                            this.log(`‚úÖ Session header detected: ${header}`, 'success');
                            sessionManagementDetected = true;
                        }
                    });
                    
                    if (!sessionManagementDetected) {
                        this.log('‚ÑπÔ∏è No explicit session management detected (may be client-side)', 'info');
                    }
                    
                } catch (error) {
                    this.log(`‚ùå Session management test failed: ${error.message}`, 'error');
                }
            }
            
            // Phase 3: Database Testing (Simulated)
            async testDatabase() {
                this.log('üíæ Starting Database Testing (Simulated)', 'info');
                this.updatePhaseStatus('phase3', 'testing');
                
                try {
                    // Since we can't directly access the database from frontend,
                    // we'll test endpoints that would use the database
                    await this.testDatabaseEndpoints();
                    
                    // Test for database-driven content
                    await this.testDatabaseContent();
                    
                    this.updatePhaseStatus('phase3', 'success');
                    this.log('‚úÖ Database testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase3', 'error');
                    this.log(`‚ùå Database testing failed: ${error.message}`, 'error');
                }
            }
            
            async testDatabaseEndpoints() {
                this.log('Testing database endpoints...', 'info');
                
                // Test potential API endpoints
                const apiEndpoints = [
                    '/api/data',
                    '/api/climate',
                    '/api/scenarios',
                    '/api/health'
                ];
                
                for (const endpoint of apiEndpoints) {
                    try {
                        const response = await fetch(`https://climate.johnnycchung.com${endpoint}`);
                        
                        if (response.ok) {
                            this.log(`‚úÖ Database endpoint active: ${endpoint}`, 'success');
                        } else if (response.status === 404) {
                            this.log(`‚ÑπÔ∏è Endpoint not found: ${endpoint}`, 'info');
                        } else {
                            this.log(`‚ö†Ô∏è Endpoint issue: ${endpoint} (${response.status})`, 'warning');
                        }
                    } catch (error) {
                        this.log(`‚ÑπÔ∏è Endpoint test: ${endpoint} - ${error.message}`, 'info');
                    }
                }
            }
            
            async testDatabaseContent() {
                this.log('Testing database-driven content...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com');
                    const html = await response.text();
                    
                    // Look for indicators of dynamic content
                    const dynamicIndicators = [
                        'data-',
                        'id="data',
                        'class="data',
                        'json',
                        'api'
                    ];
                    
                    let dynamicContentFound = false;
                    
                    dynamicIndicators.forEach(indicator => {
                        if (html.toLowerCase().includes(indicator)) {
                            dynamicContentFound = true;
                        }
                    });
                    
                    if (dynamicContentFound) {
                        this.log('‚úÖ Dynamic content indicators found', 'success');
                    } else {
                        this.log('‚ÑπÔ∏è Static content detected (no database indicators)', 'info');
                    }
                    
                } catch (error) {
                    this.log(`‚ùå Database content test failed: ${error.message}`, 'error');
                }
            }
            
            // Phase 4: Link Testing
            async testLinks() {
                this.log('üîó Starting Comprehensive Link Testing', 'info');
                this.updatePhaseStatus('phase4', 'testing');
                
                try {
                    await this.testNavigationLinks();
                    await this.testFrameworkLinks();
                    await this.testExternalLinks();
                    
                    this.updatePhaseStatus('phase4', 'success');
                    this.log('‚úÖ Link testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase4', 'error');
                    this.log(`‚ùå Link testing failed: ${error.message}`, 'error');
                }
            }
            
            async testNavigationLinks() {
                this.log('Testing navigation links...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com');
                    const html = await response.text();
                    
                    // Extract links from HTML
                    const linkRegex = /<a[^>]+href=["']([^"']+)["'][^>]*>/gi;
                    const links = [];
                    let match;
                    
                    while ((match = linkRegex.exec(html)) !== null) {
                        const href = match[1];
                        if (href.startsWith('http') || href.startsWith('/') || href.endsWith('.html')) {
                            links.push(href);
                        }
                    }
                    
                    this.log(`Found ${links.length} navigation links to test`, 'info');
                    
                    // Test a sample of links (first 10 to avoid overwhelming)
                    const testLinks = links.slice(0, 10);
                    
                    for (const link of testLinks) {
                        try {
                            let fullUrl = link;
                            if (link.startsWith('/')) {
                                fullUrl = `https://climate.johnnycchung.com${link}`;
                            }
                            
                            const linkResponse = await fetch(fullUrl, { method: 'HEAD' });
                            
                            if (linkResponse.ok) {
                                this.log(`‚úÖ Link working: ${link}`, 'success');
                            } else {
                                this.log(`‚ùå Broken link: ${link} (${linkResponse.status})`, 'error');
                            }
                        } catch (error) {
                            this.log(`‚ùå Link test failed: ${link} - ${error.message}`, 'error');
                        }
                    }
                    
                } catch (error) {
                    this.log(`‚ùå Navigation link extraction failed: ${error.message}`, 'error');
                }
            }
            
            async testFrameworkLinks() {
                this.log('Testing framework links...', 'info');
                
                const frameworkUrls = [
                    'https://climate.johnnycchung.com/working-dual-climada.html',
                    'https://climate.johnnycchung.com/working-dual-climate-os.html',
                    'https://climate.johnnycchung.com/cbottle-scenario-analysis.html',
                    'https://climate.johnnycchung.com/climada-hurricane-analysis.html',
                    'https://climate.johnnycchung.com/climate-os-statistical.html'
                ];
                
                for (const url of frameworkUrls) {
                    try {
                        const response = await fetch(url, { cache: 'no-cache' });
                        const urlPath = new URL(url).pathname;
                        
                        if (response.ok) {
                            this.log(`‚úÖ Framework link: ${urlPath}`, 'success');
                        } else {
                            this.log(`‚ùå Framework link broken: ${urlPath} (${response.status})`, 'error');
                        }
                    } catch (error) {
                        this.log(`‚ùå Framework link test failed: ${url} - ${error.message}`, 'error');
                    }
                }
            }
            
            async testExternalLinks() {
                this.log('Testing external integrations...', 'info');
                
                // Test Mapbox API availability
                try {
                    const mapboxResponse = await fetch('https://api.mapbox.com/v2/', { method: 'HEAD' });
                    
                    if (mapboxResponse.ok || mapboxResponse.status === 401) {
                        this.log('‚úÖ Mapbox API accessible', 'success');
                    } else {
                        this.log(`‚ö†Ô∏è Mapbox API status: ${mapboxResponse.status}`, 'warning');
                    }
                } catch (error) {
                    this.log(`‚ùå Mapbox API test failed: ${error.message}`, 'error');
                }
                
                // Test CDN resources
                const cdnResources = [
                    'https://cdn.jsdelivr.net/npm/chart.js',
                    'https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js'
                ];
                
                for (const resource of cdnResources) {
                    try {
                        const response = await fetch(resource, { method: 'HEAD' });
                        
                        if (response.ok) {
                            this.log(`‚úÖ External resource: ${new URL(resource).hostname}`, 'success');
                        } else {
                            this.log(`‚ùå External resource failed: ${resource}`, 'error');
                        }
                    } catch (error) {
                        this.log(`‚ùå External resource test failed: ${resource}`, 'error');
                    }
                }
            }
            
            // Phase 5: Framework Testing
            async testFrameworks() {
                this.log('üó∫Ô∏è Starting Framework Testing', 'info');
                this.updatePhaseStatus('phase5', 'testing');
                
                try {
                    await this.testCLIMADAFramework();
                    await this.testClimateOSFramework();
                    await this.testCBottleFramework();
                    
                    this.updatePhaseStatus('phase5', 'success');
                    this.log('‚úÖ Framework testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase5', 'error');
                    this.log(`‚ùå Framework testing failed: ${error.message}`, 'error');
                }
            }
            
            async testCLIMADAFramework() {
                this.log('Testing CLIMADA framework...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com/working-dual-climada.html');
                    
                    if (response.ok) {
                        const html = await response.text();
                        
                        // Check for CLIMADA-specific elements
                        const climadaIndicators = [
                            'climada',
                            'hurricane',
                            'scenario',
                            'mapbox',
                            'generateHurricaneData'
                        ];
                        
                        let foundIndicators = 0;
                        climadaIndicators.forEach(indicator => {
                            if (html.toLowerCase().includes(indicator.toLowerCase())) {
                                foundIndicators++;
                            }
                        });
                        
                        const completeness = (foundIndicators / climadaIndicators.length) * 100;
                        
                        if (completeness >= 80) {
                            this.log(`‚úÖ CLIMADA framework: ${completeness.toFixed(0)}% complete`, 'success');
                        } else {
                            this.log(`‚ö†Ô∏è CLIMADA framework: ${completeness.toFixed(0)}% complete`, 'warning');
                        }
                    } else {
                        this.log(`‚ùå CLIMADA framework not accessible: ${response.status}`, 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå CLIMADA framework test failed: ${error.message}`, 'error');
                }
            }
            
            async testClimateOSFramework() {
                this.log('Testing Climate-OS framework...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com/working-dual-climate-os.html');
                    
                    if (response.ok) {
                        const html = await response.text();
                        
                        // Check for Climate-OS specific elements
                        const climateOSIndicators = [
                            'climate-os',
                            'statistical',
                            'analysis',
                            'mapbox',
                            'generateStatisticalData'
                        ];
                        
                        let foundIndicators = 0;
                        climateOSIndicators.forEach(indicator => {
                            if (html.toLowerCase().includes(indicator.toLowerCase())) {
                                foundIndicators++;
                            }
                        });
                        
                        const completeness = (foundIndicators / climateOSIndicators.length) * 100;
                        
                        if (completeness >= 80) {
                            this.log(`‚úÖ Climate-OS framework: ${completeness.toFixed(0)}% complete`, 'success');
                        } else {
                            this.log(`‚ö†Ô∏è Climate-OS framework: ${completeness.toFixed(0)}% complete`, 'warning');
                        }
                    } else {
                        this.log(`‚ùå Climate-OS framework not accessible: ${response.status}`, 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå Climate-OS framework test failed: ${error.message}`, 'error');
                }
            }
            
            async testCBottleFramework() {
                this.log('Testing C-bottle framework...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com/cbottle-scenario-analysis.html');
                    
                    if (response.ok) {
                        const html = await response.text();
                        
                        // Check for C-bottle specific elements
                        const cbottleIndicators = [
                            'cbottle',
                            'scenario',
                            'analysis',
                            'mapbox',
                            'dual-map'
                        ];
                        
                        let foundIndicators = 0;
                        cbottleIndicators.forEach(indicator => {
                            if (html.toLowerCase().includes(indicator.toLowerCase())) {
                                foundIndicators++;
                            }
                        });
                        
                        const completeness = (foundIndicators / cbottleIndicators.length) * 100;
                        
                        if (completeness >= 80) {
                            this.log(`‚úÖ C-bottle framework: ${completeness.toFixed(0)}% complete`, 'success');
                        } else {
                            this.log(`‚ö†Ô∏è C-bottle framework: ${completeness.toFixed(0)}% complete`, 'warning');
                        }
                    } else {
                        this.log(`‚ùå C-bottle framework not accessible: ${response.status}`, 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå C-bottle framework test failed: ${error.message}`, 'error');
                }
            }
            
            // Phase 6: Performance Testing
            async testPerformance() {
                this.log('‚ö° Starting Performance Testing', 'info');
                this.updatePhaseStatus('phase6', 'testing');
                
                try {
                    await this.testPageLoadSpeeds();
                    await this.testResourceOptimization();
                    await this.testMobilePerformance();
                    
                    this.updatePhaseStatus('phase6', 'success');
                    this.log('‚úÖ Performance testing completed', 'success');
                    
                } catch (error) {
                    this.updatePhaseStatus('phase6', 'error');
                    this.log(`‚ùå Performance testing failed: ${error.message}`, 'error');
                }
            }
            
            async testPageLoadSpeeds() {
                this.log('Testing page load speeds...', 'info');
                
                const testUrls = [
                    'https://climate.johnnycchung.com',
                    'https://climate.johnnycchung.com/working-dual-climada.html',
                    'https://climate.johnnycchung.com/working-dual-climate-os.html'
                ];
                
                for (const url of testUrls) {
                    try {
                        const startTime = performance.now();
                        const response = await fetch(url, { cache: 'no-cache' });
                        const endTime = performance.now();
                        
                        const loadTime = endTime - startTime;
                        const urlPath = new URL(url).pathname || '/';
                        
                        if (loadTime < 1000) {
                            this.log(`‚úÖ ${urlPath}: ${loadTime.toFixed(0)}ms (excellent)`, 'success');
                        } else if (loadTime < 3000) {
                            this.log(`‚ö†Ô∏è ${urlPath}: ${loadTime.toFixed(0)}ms (acceptable)`, 'warning');
                        } else {
                            this.log(`‚ùå ${urlPath}: ${loadTime.toFixed(0)}ms (too slow)`, 'error');
                        }
                    } catch (error) {
                        this.log(`‚ùå Load speed test failed for ${url}: ${error.message}`, 'error');
                    }
                }
            }
            
            async testResourceOptimization() {
                this.log('Testing resource optimization...', 'info');
                
                const resources = [
                    'https://climate.johnnycchung.com/shared-styles.css',
                    'https://climate.johnnycchung.com/working-dual-climada.html',
                    'https://climate.johnnycchung.com/working-dual-climate-os.html'
                ];
                
                for (const resource of resources) {
                    try {
                        const response = await fetch(resource, { cache: 'no-cache' });
                        const contentLength = response.headers.get('content-length');
                        const contentEncoding = response.headers.get('content-encoding');
                        
                        const resourceName = new URL(resource).pathname.split('/').pop();
                        
                        if (contentEncoding && contentEncoding.includes('gzip')) {
                            this.log(`‚úÖ ${resourceName}: Gzip compression enabled`, 'success');
                        } else {
                            this.log(`‚ö†Ô∏è ${resourceName}: No compression detected`, 'warning');
                        }
                        
                        if (contentLength) {
                            const sizeKB = Math.round(parseInt(contentLength) / 1024);
                            if (sizeKB < 500) {
                                this.log(`‚úÖ ${resourceName}: ${sizeKB}KB (optimized)`, 'success');
                            } else {
                                this.log(`‚ö†Ô∏è ${resourceName}: ${sizeKB}KB (large)`, 'warning');
                            }
                        }
                    } catch (error) {
                        this.log(`‚ùå Resource optimization test failed: ${error.message}`, 'error');
                    }
                }
            }
            
            async testMobilePerformance() {
                this.log('Testing mobile performance indicators...', 'info');
                
                try {
                    const response = await fetch('https://climate.johnnycchung.com');
                    const html = await response.text();
                    
                    // Check for mobile optimization indicators
                    const mobileIndicators = [
                        'viewport',
                        'responsive',
                        'mobile',
                        '@media',
                        'touch'
                    ];
                    
                    let mobileOptimization = 0;
                    mobileIndicators.forEach(indicator => {
                        if (html.toLowerCase().includes(indicator)) {
                            mobileOptimization++;
                        }
                    });
                    
                    const mobileScore = (mobileOptimization / mobileIndicators.length) * 100;
                    
                    if (mobileScore >= 80) {
                        this.log(`‚úÖ Mobile optimization: ${mobileScore.toFixed(0)}%`, 'success');
                    } else if (mobileScore >= 60) {
                        this.log(`‚ö†Ô∏è Mobile optimization: ${mobileScore.toFixed(0)}%`, 'warning');
                    } else {
                        this.log(`‚ùå Mobile optimization: ${mobileScore.toFixed(0)}%`, 'error');
                    }
                } catch (error) {
                    this.log(`‚ùå Mobile performance test failed: ${error.message}`, 'error');
                }
            }
            
            // Execute the complete Super Prompt
            async executeFullSuperPrompt() {
                if (this.isRunning) {
                    this.log('‚ö†Ô∏è Super Prompt already running...', 'warning');
                    return;
                }
                
                this.isRunning = true;
                this.log('üöÄ EXECUTING SUPER PROMPT: Comprehensive Climate Website Testing', 'info');
                this.log('Mission: Validate 100% functionality of climate.johnnycchung.com', 'info');
                
                try {
                    // Reset metrics
                    this.totalTests = 0;
                    this.passedTests = 0;
                    this.failedTests = 0;
                    this.criticalErrors = 0;
                    this.startTime = Date.now();
                    
                    // Execute all phases
                    await this.testInfrastructure();
                    await this.delay(1000);
                    
                    await this.testAuthentication();
                    await this.delay(1000);
                    
                    await this.testDatabase();
                    await this.delay(1000);
                    
                    await this.testLinks();
                    await this.delay(1000);
                    
                    await this.testFrameworks();
                    await this.delay(1000);
                    
                    await this.testPerformance();
                    await this.delay(1000);
                    
                    // Final results
                    const totalTime = Math.round((Date.now() - this.startTime) / 1000);
                    const successRate = this.totalTests > 0 ? 
                        Math.round((this.passedTests / this.totalTests) * 100) : 0;
                    
                    this.log('üéâ SUPER PROMPT EXECUTION COMPLETED', 'info');
                    this.log(`üìä Final Results: ${this.passedTests}/${this.totalTests} tests passed (${successRate}%)`, 'info');
                    this.log(`‚è±Ô∏è Total execution time: ${totalTime}s`, 'info');
                    
                    if (this.criticalErrors > 0) {
                        this.log(`üö® CRITICAL: ${this.criticalErrors} critical errors detected!`, 'error');
                    } else if (successRate >= 95) {
                        this.log('üü¢ EXCELLENT: Website is fully functional!', 'success');
                    } else if (successRate >= 85) {
                        this.log('üü° GOOD: Website is mostly functional with minor issues', 'warning');
                    } else {
                        this.log('üî¥ ISSUES DETECTED: Website needs attention', 'error');
                    }
                    
                } catch (error) {
                    this.log(`‚ùå SUPER PROMPT EXECUTION FAILED: ${error.message}`, 'error');
                } finally {
                    this.isRunning = false;
                }
            }
            
            async delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }
        
        // Initialize the Super Prompt Tester
        const superTester = new SuperPromptTester();
        
        // UI Event Handlers
        function executeFullSuperPrompt() {
            superTester.executeFullSuperPrompt();
        }
        
        function runPhaseTest(phase) {
            switch(phase) {
                case 'infrastructure':
                    superTester.testInfrastructure();
                    break;
                case 'authentication':
                    superTester.testAuthentication();
                    break;
                case 'database':
                    superTester.testDatabase();
                    break;
                case 'links':
                    superTester.testLinks();
                    break;
                case 'frameworks':
                    superTester.testFrameworks();
                    break;
                case 'performance':
                    superTester.testPerformance();
                    break;
                default:
                    superTester.log(`Unknown phase: ${phase}`, 'error');
            }
        }
        
        function hideEmergencyPanel() {
            document.getElementById('emergency-panel').classList.remove('active');
        }
        
        function exportResults() {
            const results = {
                timestamp: new Date().toISOString(),
                metrics: {
                    totalTests: superTester.totalTests,
                    passedTests: superTester.passedTests,
                    failedTests: superTester.failedTests,
                    criticalErrors: superTester.criticalErrors,
                    successRate: superTester.totalTests > 0 ? 
                        Math.round((superTester.passedTests / superTester.totalTests) * 100) : 0,
                    executionTime: Math.round((Date.now() - superTester.startTime) / 1000)
                },
                testResults: superTester.testResults
            };
            
            const blob = new Blob([JSON.stringify(results, null, 2)], 
                { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `climate-website-test-results-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            superTester.log('‚úÖ Test results exported', 'success');
        }
        
        function clearResults() {
            superTester.testResults = [];
            superTester.totalTests = 0;
            superTester.passedTests = 0;
            superTester.failedTests = 0;
            superTester.criticalErrors = 0;
            superTester.updateResultsUI();
            superTester.updateMetrics();
            superTester.log('Test results cleared', 'info');
        }
        
        // Auto-start basic validation
        window.addEventListener('load', () => {
            superTester.log('üß™ Super Prompt testing framework initialized', 'info');
            superTester.log('Ready to execute comprehensive website testing', 'info');
            
            // Auto-test the iframe
            setTimeout(() => {
                const frame = document.getElementById('test-frame');
                frame.onload = () => {
                    superTester.log('‚úÖ Live test frame loaded successfully', 'success');
                };
                frame.onerror = () => {
                    superTester.log('‚ùå Live test frame failed to load', 'error');
                };
            }, 2000);
        });
    </script>
</body>
</html>